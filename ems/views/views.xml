<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- top level menu: no parent -->
        <menuitem id="main_ems_menu" name="EMS"/>

        <!-- A first level in the left side menu is needed
             before using action= attribute -->
        <menuitem id="ems_menu" name="EMS"
                  parent="main_ems_menu"/>


        <!--  EMS/SESSIONS -->
        <record model="ir.actions.act_window" id="action_list_sessions">
            <field name="name">Sessions</field>
            <field name="res_model">ems.session</field>
            <field name="view_mode">calendar,tree,form</field>
            <field name="context">{"search_default_confirmed":1, "search_default_draft":1}</field>
        </record>

        <!-- the following menuitem should appear *after*
             its parent ems_menu and *after* its
             action action_list_sessions -->
        <menuitem id="menu_ems_session" parent="ems_menu" name="Sessions" sequence="10"
                  action="action_list_sessions"/>

        <!-- Session Tree view -->
        <record model="ir.ui.view" id="view_ems_session_tree">
            <field name="name">Sessions</field>
            <field name="model">ems.session</field>
            <field name="arch" type="xml">
                <tree string="Sessions"
                      fonts="bold:state=='confirmed'"
                      colors="blue:state=='draft';lightgray:state=='invalid';green:state=='confirmed';purple:state=='rescheduled';firebrick:state=='reschedulepending';darkorange:state=='schedulepending';grey:state in ('cancel')">
                    <field name="number"/>
                    <field name="source_numbers"/>
                    <field name="service_id"/>
                    <!--field name="center_id"/>
                    <field name="ubication_id"/>
                    <field name="resource_ids"/-->
                    <field name="weekyear_begin"/>
                    <field name="weekday_begin"/>
                    <field name="date_begin"/>
                    <field name="date_end"/>
                    <field name="partner_text"/>
                    <field name="responsible_id"/>
                    <field name="has_description"/>
                    <field name="num_pending_sessions"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- Session Form view -->
        <record model="ir.ui.view" id="view_ems_session_form">
            <field name="name">Sessions</field>
            <field name="model">ems.session</field>
            <field name="arch" type="xml">
                <form string="Sessions">
                    <header>
                        <button string="Print" name="button_print" states="confirmed" type="object"
                                class="oe_highlight" groups="base.group_user"/>
                        <button string="Confirm" name="button_confirm" states="draft" type="object"
                                class="oe_highlight" groups="base.group_user"/>
                        <button string="Draft" name="button_draft"
                                states="invalid,confirmed,reschedulepending,rescheduled,schedulepending,cancelled"
                                type="object"
                                groups="base.group_user"/>
                        <button string="Reschedule" name="button_reschedule" states="confirmed,reschedulepending"
                                type="object"
                                groups="base.group_user"/>
                        <button string="Cancel" name="button_cancel" states="confirmed,draft" type="object"
                                groups="base.group_user"/>
                        <button string="Reschedule pending" name="button_reschedule_pending" states="confirmed,draft"
                                type="object"
                                groups="base.group_user"/>
                        <button string="Schedule pending" name="button_schedule_pending" states="draft"
                                type="object"
                                groups="base.group_user"/>
                        <button string="Schedule" name="button_schedule" states="confirmed" type="object"
                                groups="base.group_user"/>
                        <button string="Invalidate" name="button_invalidate" states="draft" type="object"
                                groups="base.group_user"/>
                        <field name="state" widget="statusbar"
                               statusbar_visible="draft,invalid,confirmed,schedulepending,reschedulepending,rescheduled,cancelled"
                               statusbar_colors='{"draft":"blue", "invalid":"lightgray", "confirmed":"green", "schedulepending":"darkorange", "reschedulepending":"firebrick",
                                                  "rescheduled":"purple", "cancelled":"grey"}'/>
                    </header>
                    <sheet>
                        <group colspan="2" col="4">
                            <field name="number"/>
                        </group>
                        <group colspan="2" col="4">
                            <group>
                                <field name="center_id" options="{'no_create': True}"
                                       attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                            </group>
                            <group></group>
                        </group>
                        <!--div class="oe_right">
                            <button name="" class="oe_inline oe_stat_button"
                                    string="View on calendar" type="action" icon="fa-calendar"/>
                        </div-->
                        <group colspan="2" col="4">
                            <group>
                                <field name="service_id" options="{'no_create': True}"
                                       attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                <field name="ubication_id" options="{'no_create': True}"
                                       attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                <field name="is_all_center" invisible="1"/>
                            </group>
                            <group>
                                <field name="duration" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                <field name="date_begin" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                <field name="date_end" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                <field name="weekday_begin"/>
                            </group>
                        </group>

                        <group attrs="{'invisible':[('is_all_center', '=', True)]}">
                            <group colspan="2" col="4">
                                <field name="responsible_id"
                                       attrs="{'invisible': [('is_meeting', '=', True)],
                                               'required': [('is_all_center', '=', False), ('is_meeting', '=', False)],
                                               'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="resource_ids" string="Resources" widget="many2many_tags"
                                       options="{'no_create': True}" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                <field name="is_meeting" invisible="1"/>
                            </group>
                            <group string="Attendees">
                                <field name="partner_ids" nolabel="1" attrs="{'readonly':[('state', '!=', 'draft')]}">
                                    <tree editable="bottom">
                                        <field name="partner_id"/>
                                        <field name="num_session" attrs="{'readonly':[('force_session', '=', False)]}"/>
                                        <field name="force_session"/>
                                        <field name="phone"/>
                                        <field name="mobile"/>
                                        <field name="email"/>
                                        <button name="view_sessions"
                                                string="View Sessions" type="object"
                                                icon="terp-stock_effects-object-colorize"/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                        <group>

                        </group>
                        <notebook>
                            <!--page string='Session Details' groups="base.group_no_one">
                                <group colspan="4">
                                    <field name="weight"/>
                                </group>
                            </page-->
                            <page string="Description">
                                <field name="description" nolabel="1" placeholder="Session Description..."/>
                            </page>
                            <page string="Attendance control" attrs="{'invisible':[('state', '!=', 'confirmed')]}">
                                <group>
                                    <field name="delayed_session"/>
                                    <field name="date_begin_actual"
                                           attrs="{'invisible':[('delayed_session', '=', False)], 'required':[('delayed_session', '=', True)]}"/>
                                    <field name="delay_reason" widget="text"
                                           attrs="{'invisible':[('delayed_session', '=', False)], 'required':[('delayed_session', '=', True)]}"/>
                                </group>
                            </page>
                            <page string="Other information">
                                <group>
                                    <field name="out_of_time"
                                           attrs="{'invisible':[('state', 'not in', ('rescheduled', 'reschedulepending'))]}"/>
                                    <field name="reason" widget="text" attrs="{'invisible':[('state', 'not in', ('cancelled', 'rescheduled', 'reschedulepending'))],
                                                                               'required':[('state', 'in', ('cancelled', 'rescheduled', 'reschedulepending'))]}"/>
                                </group>
                                <group string="Source sessions">
                                    <field name="source_session_ids" nolabel="1"/>
                                </group>
                                <group string="Target sessions">
                                    <field name="target_session_ids" nolabel="1"/>
                                </group>
                            </page>
                            <page string="tmp">
                                <group>
                                    <field name="source_session_id"/>
                                    <field name="target_session_id"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Session Calendar view -->
        <record id="view_ems_session_calendar" model="ir.ui.view">
            <field name="name">ems.session.calendar</field>
            <field name="model">ems.session</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar color="color_rel" date_start="date_begin" date_stop="date_end"
                          string="Session Organization" mode="week">
                    <field name="session_text"/>
                    <!--field name="name"/-->
                    <!--field name="responsible_id"/-->
                    <field name="service_id" invisible="1"/>
                </calendar>
            </field>
        </record>

        <!-- Session Search view -->
        <record model="ir.ui.view" id="ems_session_search_view">
            <field name="name">ems.session.search</field>
            <field name="model">ems.session</field>
            <field name="arch" type="xml">
                <search>
                    <filter string="My sessions" help="My Sessions" domain="[('responsible_id','=',uid)]"/>
                    <filter string="EMS sessions" name="is_ems" domain="[('service_id.is_ems','=',True)]"
                            help="EMS Sessions"/>
                    <separator/>
                    <filter string="Upcoming" name="upcoming"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"
                            help="Upcoming Sessions from today"/>
                    <filter string="Upcoming now" name="upcoming_now"
                            domain="[('date_begin','&gt;', datetime.datetime.now())]"
                            help="Upcoming Sessions from now"/>
                    <filter string="Today" name="today"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),
                                     ('date_begin','&lt;', datetime.datetime.combine(context_today()+datetime.timedelta(days=1), datetime.time(0,0,0)))]"
                            help="Today sessions"/>
                    <filter string="Tomorrow" name="tomorrow"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine(context_today()+datetime.timedelta(days=1), datetime.time(0,0,0))),
                                     ('date_begin','&lt;', datetime.datetime.combine(context_today()+datetime.timedelta(days=2), datetime.time(0,0,0)))]"
                            help="Tomorrow Sessions"/>
                    <separator/>
                    <filter string="Current month" name="currentmonth"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)).replace(day=1)),
                                     ('date_begin','&lt;', datetime.datetime.combine(context_today()+datetime.timedelta(days=32), datetime.time(0,0,0)).replace(day=1))]"
                            help="Current month sessions"/>
                    <filter string="Previous month" name="previousmonth"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine((context_today().replace(day=1)+datetime.timedelta(days=-1)).replace(day=1), datetime.time(0,0,0))),
                                     ('date_begin','&lt;', datetime.datetime.combine(context_today().replace(day=1), datetime.time(0,0,0)))]"
                            help="Previous month sessions"/>
                    <separator/>
                    <filter string="Draft" name="draft" domain="[('state','=','draft')]"
                            help="Sessions in New state"/>
                    <filter string="Confirmed" name="confirmed" domain="[('state','=','confirmed')]"
                            help="Confirmed Sessions"/>
                    <filter string="Cancelled" name="cancelled" domain="[('state','=','cancelled')]"
                            help="Cancelled Sessions"/>
                    <filter string="Rescheduled" name="rescheduled" domain="[('state','=','rescheduled')]"
                            help="Rescheduled Sessions"/>
                    <filter string="Reschedule pending" name="reschedulepending"
                            domain="[('state','=','reschedulepending')]"
                            help="Reschedule Pending Sessions"/>
                    <filter string="Schedule pending" name="schedulepending"
                            domain="[('state','=','schedulepending')]"
                            help="Schedule Pending Sessions"/>
                    <filter string="Invalid" name="invalid"
                            domain="[('state','=','invalid')]"
                            help="Invalid Sessions"/>
                    <field name="partner_text" string="Attendees"/>
                    <field name="responsible_id"/>
                    <field name="description"/>
                    <field name="service_id"/>
                    <field name="resource_ids"/>
                    <field name="ubication_id"/>
                    <field name="center_id"/>
                    <field name="number"/>
                    <group expand="0" string="Group By">
                        <filter string="Responsible" context="{'group_by': 'responsible_id'}"/>
                        <filter string="Service" context="{'group_by':'service_id'}"/>
                        <filter string="Status" context="{'group_by':'state'}"/>
                        <filter string="Start Month" domain="[]" context="{'group_by':'date_begin'}"/>
                    </group>
                </search>
            </field>
        </record>


        <!-- ########################## TIMETABLE Wizard ########################## -->
        <!-- Creem el TIMETABLE wizard form -->
        <record model="ir.ui.view" id="wizard_timetable_form_view">
            <field name="name">wizard.timetable.form</field>
            <field name="model">ems.timetable.wizard</field>
            <field name="arch" type="xml">
                <form string="Set priorities">
                    <group>
                        <field name="timetable_ids" nolabel="1">
                            <tree> <!-- create="0" delete="0" edit="1" editable="bottom"-->
                                <field name="sequence" widget="handle"/>
                                <field name="center_id"/>
                                <field name="type"/>
                                <field name="day" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>
                                <field name="time_begin" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>
                                <field name="time_end" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>

                                <field name="date_begin_year" attrs="{'invisible':[('type', '!=', 'yearday')]}"/>
                                <field name="date_end_year" attrs="{'invisible':[('type', '!=', 'yearday')]}"/>

                                <field name="responsible_id"/>
                            </tree>
                        </field>
                    </group>
                    <footer>
                        <!--button name="save" type="object"
                                string="Save" class="oe_highlight"/>
                        or-->
                        <button special="cancel" string="Close"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- posem el link al wizard forma netiro al menu  "mas" del registr -->
        <act_window id="action_timetable_wizard"
                    name="Set priorities"
                    src_model="ems.timetable"
                    res_model="ems.timetable.wizard"
                    view_mode="form"
                    target="new"
                    key2="client_action_multi"/>


        <!-- ########################## EMS/TIMETABLE ########################## -->
        <record model="ir.actions.act_window" id="action_list_timetable">
            <field name="name">Timetable</field>
            <field name="res_model">ems.timetable</field>
            <field name="view_mode">tree,form,calendar</field>
            <!--field name="context">{"search_default_upcoming":1}</field-->
        </record>

        <!-- the following menuitem should appear *after*
             its parent ems_menu and *after* its
             action action_list_sessions -->
        <menuitem id="menu_ems_timetable" parent="ems_menu" name="Timetable" sequence="20"
                  action="action_list_timetable"/>

        <!-- TIMETABLE Tree view -->
        <record model="ir.ui.view" id="view_ems_timetable_tree">
            <field name="name">Timetable</field>
            <field name="model">ems.timetable</field>
            <field name="arch" type="xml">
                <tree string="Timetable">
                    <field name="sequence"/>
                    <field name="center_id"/>
                    <field name="type"/>
                    <field name="day" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>
                    <field name="time_begin" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>
                    <field name="time_end" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>

                    <field name="date_begin_year" attrs="{'invisible':[('type', '!=', 'yearday')]}"/>
                    <field name="date_end_year" attrs="{'invisible':[('type', '!=', 'yearday')]}"/>

                    <field name="responsible_id"/>

                    <!--field name="date_begin"/>
                    <field name="date_end"/-->
                </tree>
            </field>
        </record>

        <!-- TIMETABLE Form view -->
        <record model="ir.ui.view" id="view_ems_timetable_form">
            <field name="name">Timetable</field>
            <field name="model">ems.timetable</field>
            <field name="arch" type="xml">
                <form string="Timetable">
                    <header>
                        <button name="%(action_timetable_wizard)d" string="Set priorities" type="action"
                                class="oe_highlight" groups="base.group_sale_manager"/>
                    </header>
                    <sheet>
                        <group col="4" colspan="2">
                            <field name="center_id" options="{'no_create': True, 'no_open': True}"/>
                            <newline/>
                            <field name="responsible_id" options="{'no_quick_create': True}"/>
                            <newline/>
                            <field name="type" widget="radio"/>
                        </group>
                        <group col="4" colspan="2" attrs="{'invisible':[('type', '!=', 'weekday')]}">
                            <field name="day" options="{'no_create': True}"
                                   attrs="{'required':[('type', '=', 'weekday')]}"/>
                            <newline/>
                            <field name="time_begin" string="Initial time"
                                   attrs="{'required':[('type', '=', 'weekday')]}"/>
                            <field name="time_end" string="End time" attrs="{'required':[('type', '=', 'weekday')]}"/>
                            <newline/>
                        </group>
                        <group col="4" colspan="2" attrs="{'invisible':[('type', '!=', 'yearday')]}">
                            <field name="date_begin_year" attrs="{'required':[('type', '=', 'yearday')]}"/>
                            <field name="date_end_year" attrs="{'required':[('type', '=', 'yearday')]}"/>
                        </group>
                    </sheet>
                    <!--div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div-->
                </form>
            </field>
        </record>

        <!-- TIMETABLE Calendar view -->
        <record id="view_ems_timetable_calendar" model="ir.ui.view">
            <field name="name">Timetable</field>
            <field name="model">ems.timetable</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar color="color_rel" date_start="date_begin" date_stop="date_end"
                          string="Responsible availability" mode="week">
                    <field name="center_id"/>
                    <field name="responsible_id"/>
                </calendar>
            </field>
        </record>

        <!-- TIMETABLE Search view -->
        <!--record model="ir.ui.view" id="ems_session_search_view">
            <field name="name">ems.session.search</field>
            <field name="model">ems.session</field>
            <field name="arch" type="xml">
                <search>
                    <filter string="My Sessions" help="My Sessions" domain="[('responsible_id','=',uid)]"/>
                    <separator/>
                    <filter string="Upcoming" name="upcoming"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"
                            help="Upcoming sessions from today"/>
                    <separator/>
                    <filter string="Unconfirmed" name="draft" domain="[('state','=','draft')]"
                            help="Events in New state"/>
                    <filter string="Confirmed" domain="[('state','=','confirm')]" help="Confirmed events"/>
                    <field name="customer_id"/>
                    <field name="responsible_id"/>
                    <field name="description"/>
                    <field name="service_id"/>
                    <field name="resource_ids"/>
                    <field name="ubication_id"/>
                    <field name="name"/>
                    <group expand="0" string="Group By">
                        <filter string="Responsible_id" context="{'group_by': 'responsible_id'}"/>
                        <filter string="Service" context="{'group_by':'service_id'}"/>
                        <filter string="Status" context="{'group_by':'state'}"/>
                        <filter string="Start Month" domain="[]" context="{'group_by':'date_begin'}"/>
                    </group>
                </search>
            </field>
        </record-->


        <!-- ########################## EMS/RESPONSIBLE ########################## -->
        <record model="ir.actions.act_window" id="action_list_responsible">
            <field name="name">Responsible</field>
            <field name="res_model">ems.responsible</field>
            <field name="view_mode">tree,form</field>
        </record>

        <!-- the following menuitem should appear *after*
             its parent ems_menu and *after* its
             action action_list_sessions -->
        <menuitem id="menu_ems_responsible" parent="ems_menu" name="Responsibles" sequence="30"
                  action="action_list_responsible"/>

        <!-- RESPONSIBLE Tree view -->
        <record model="ir.ui.view" id="view_ems_responsible_tree">
            <field name="name">Responsible</field>
            <field name="model">ems.responsible</field>
            <field name="arch" type="xml">
                <tree string="Responsible">
                    <field name="user_id"/>
                    <field name="name"/>
                    <field name="is_staff"/>
                    <field name="timetable_ids"/>
                </tree>
            </field>
        </record>

        <!-- RESPONSIBLE Form view -->
        <record model="ir.ui.view" id="view_ems_responsible_form">
            <field name="name">Responsible</field>
            <field name="model">ems.responsible</field>
            <field name="arch" type="xml">
                <form string="Responsible">
                    <header>
                        <button string="Print sessions" name="button_print_sessions" type="object"
                                class="oe_highlight" groups="base.group_user"/>
                    </header>
                    <sheet>
                        <group col="4" colspan="2">
                            <field name="user_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="color"/>
                            <field name="name"/>
                            <field name="is_staff"/>
                        </group>
                        <group>
                            <field name="description"/>
                        </group>
                        <group string="Absences">
                            <field name="absence_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="center_id"/>
                                    <field name="ini_date"/>
                                    <field name="end_date"/>
                                    <field name="reason"/>
                                </tree>
                            </field>
                        </group>
                        <group string="Timetables">
                            <field name="timetable_ids" nolabel="1" attrs="{'readonly':True}">
                                <tree default_order="center_id, date_begin"> <!-- create="0" delete="0" edit="0"-->
                                    <field name="center_id"/>
                                    <field name="type" invisible="1"/>

                                    <field name="day" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>
                                    <field name="time_begin" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>
                                    <field name="time_end" attrs="{'invisible':[('type', '!=', 'weekday')]}"/>

                                    <field name="date_begin_year" attrs="{'invisible':[('type', '!=', 'yearday')]}"/>
                                    <field name="date_end_year" attrs="{'invisible':[('type', '!=', 'yearday')]}"/>

                                    <field name="date_begin" invisible="1"/>
                                    <field name="date_end" invisible="1"/>
                                </tree>
                            </field>
                        </group>
                        <group string="Upcoming sessions">
                            <field name="session_ids" nolabel="1" attrs="{'readonly':True}">
                                <tree>
                                    <field name="center_id"/>
                                    <field name="service_id"/>
                                    <field name="ubication_id"/>
                                    <field name="partner_text"/>
                                    <field name="date_begin"/>
                                    <field name="date_end"/>
                                </tree>
                            </field>
                        </group>


                    </sheet>
                    <!--div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div-->
                </form>
            </field>
        </record>

        <!-- RESPONSIBLE Calendar view -->
        <!--record id="view_ems_session_calendar" model="ir.ui.view">
            <field name="name">ems.session.calendar</field>
            <field name="model">ems.session</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar color="service_id" date_start="date_begin" date_stop="date_end"
                          string="Session Organization" mode="week">
                    <field name="customer_id"/>
                    <field name="name"/>
                    <field name="responsible_id"/>
                </calendar>
            </field>
        </record-->

        <!-- RESPONSIBLE Search view -->
        <!--record model="ir.ui.view" id="ems_session_search_view">
            <field name="name">ems.session.search</field>
            <field name="model">ems.session</field>
            <field name="arch" type="xml">
                <search>
                    <filter string="My Sessions" help="My Sessions" domain="[('responsible_id','=',uid)]"/>
                    <separator/>
                    <filter string="Upcoming" name="upcoming"
                            domain="[('date_begin','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"
                            help="Upcoming sessions from today"/>
                    <separator/>
                    <filter string="Unconfirmed" name="draft" domain="[('state','=','draft')]"
                            help="Events in New state"/>
                    <filter string="Confirmed" domain="[('state','=','confirm')]" help="Confirmed events"/>
                    <field name="customer_id"/>
                    <field name="responsible_id"/>
                    <field name="description"/>
                    <field name="service_id"/>
                    <field name="resource_ids"/>
                    <field name="ubication_id"/>
                    <field name="name"/>
                    <group expand="0" string="Group By">
                        <filter string="Responsible" context="{'group_by': 'responsible_id'}"/>
                        <filter string="Service" context="{'group_by':'service_id'}"/>
                        <filter string="Status" context="{'group_by':'state'}"/>
                        <filter string="Start Month" domain="[]" context="{'group_by':'date_begin'}"/>
                    </group>
                </search>
            </field>
        </record-->


        <!-- ########################## EMS/CONFIGURATION ########################## -->

        <menuitem name="Configuration" id="menu_ems_config_root" parent="main_ems_menu" sequence="30"/>


        <!-- ########################## EMS/CONFIGURATION/Center ########################## -->
        <record model="ir.ui.view" id="view_ems_center_form">
            <field name="name">Center</field>
            <field name="model">ems.center</field>
            <field name="arch" type="xml">
                <form string="Center">
                    <group col="4">
                        <field name="name"/>
                    </group>
                    <group col="2">
                        <field name="description"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_ems_enter_tree">
            <field name="name">Center</field>
            <field name="model">ems.center</field>
            <field name="arch" type="xml">
                <tree string="Center">
                    <field name="name"/>
                    <!--field name="description"/-->
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_center">
            <field name="name">Center</field>
            <field name="res_model">ems.center</field>
            <field name="view_type">form</field>
        </record>
        <menuitem name="Centers" id="menu_center" action="action_center" parent="menu_ems_config_root"
                  groups="base.group_no_one"/>

        <!-- EMS/CONFIGURATION/Service -->
        <record model="ir.ui.view" id="view_ems_service_form">
            <field name="name">Service</field>
            <field name="model">ems.service</field>
            <field name="arch" type="xml">
                <form string="Service">
                    <group col="4">
                        <field name="name"/>
                        <field name="color"/>
                        <field name="is_ems"/>
                        <field name="duration"
                               attrs="{'invisible': [('is_meeting', '=', True)], 'required': [('is_meeting', '=', False)]}"/>
                        <field name="is_meeting"/>
                    </group>
                    <group>
                        <field name="min_attendees"/>
                        <newline></newline>
                        <field name="max_attendees"/>
                    </group>
                    <group col="2">
                        <field name="description"/>
                    </group>
                    <field name="ubication_ids">
                        <tree editable="bottom">
                            <field name="sequence" widget="handle"/>
                            <field name="ubication_id" options="{'no_quick_create': True}"/>
                            <field name="resource_ids" widget="many2many_tags" options="{'no_quick_create': True}"/>
                        </tree>
                    </field>

                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_ems_service_tree">
            <field name="name">Service</field>
            <field name="model">ems.service</field>
            <field name="arch" type="xml">
                <tree string="Service">
                    <field name="name"/>
                    <field name="is_ems"/>
                    <field name="duration"/>
                    <field name="is_meeting"/>
                    <field name="color"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_service">
            <field name="name">Service</field>
            <field name="res_model">ems.service</field>
            <field name="view_type">form</field>
        </record>

        <menuitem name="Services" id="menu_service" action="action_service" parent="menu_ems_config_root"
                  groups="base.group_no_one"/>

        <!-- EMS/CONFIGURATION/Ubication -->
        <record model="ir.ui.view" id="view_ems_ubication_form">
            <field name="name">Ubication</field>
            <field name="model">ems.ubication</field>
            <field name="arch" type="xml">
                <form string="Ubication">
                    <group col="4">
                        <field name="name"/>
                        <field name="center_id"/>
                    </group>
                    <group col="2">
                        <field name="is_all_center"/>
                        <field name="description"/>
                    </group>
                    <group col="2">
                        <field name="service_ids">
                            <tree string="Printing order"> <!-- editable="botttom"-->
                                <field name="sequence" widget="handle"/>
                                <field name="service_id"/>
                                <field name="resource_ids" widget="many2many_tags"/>
                            </tree>
                        </field>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_ems_ubication_tree">
            <field name="name">Ubication</field>
            <field name="model">ems.ubication</field>
            <field name="arch" type="xml">
                <tree string="Ubication">
                    <field name="name"/>
                    <field name="center_id"/>
                    <field name="is_all_center"/>
                    <!--field name="description"/-->
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_ubication">
            <field name="name">Ubication</field>
            <field name="res_model">ems.ubication</field>
            <field name="view_type">form</field>
        </record>
        <menuitem name="Ubications" id="menu_ubication" action="action_ubication" parent="menu_ems_config_root"
                  groups="base.group_no_one"/>


        <!-- EMS/CONFIGURATION/Ubication_Service -->
        <record model="ir.ui.view" id="view_ems_ubication_service_form">
            <field name="name">Ubication Service</field>
            <field name="model">ems.ubication.service.rel</field>
            <field name="arch" type="xml">
                <form string="Ubication Service">
                    <group>
                        <field name="sequence" invisible="1"/>
                        <field name="service_id"/>
                    </group>
                    <group col="4">
                        <field name="resource_ids" widget="many2many"/>
                    </group>
                </form>
            </field>
        </record>

        <!-- EMS/CONFIGURATION/Resource -->
        <record model="ir.ui.view" id="view_ems_resource_form">
            <field name="name">Resource</field>
            <field name="model">ems.resource</field>
            <field name="arch" type="xml">
                <form string="Resource">
                    <group col="4">
                        <field name="name"/>
                        <field name="center_id"/>
                    </group>
                    <group col="2">
                        <field name="description"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_ems_resource_tree">
            <field name="name">Resource</field>
            <field name="model">ems.resource</field>
            <field name="arch" type="xml">
                <tree string="Resource">
                    <field name="name"/>
                    <field name="center_id"/>
                    <!--field name="description"/-->
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_resource">
            <field name="name">Resource</field>
            <field name="res_model">ems.resource</field>
            <field name="view_type">form</field>
        </record>
        <menuitem name="Resources" id="menu_resource" action="action_resource" parent="menu_ems_config_root"/>


        <!-- EMS/CONFIGURATION/Sources -->
        <record model="ir.ui.view" id="view_ems_source_form">
            <field name="name">Source</field>
            <field name="model">ems.source</field>
            <field name="arch" type="xml">
                <form string="Source">
                    <group col="4">
                        <field name="name"/>
                        <field name="is_detail"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_ems_source_tree">
            <field name="name">Source</field>
            <field name="model">ems.source</field>
            <field name="arch" type="xml">
                <tree string="Source">
                    <field name="name"/>
                    <field name="is_detail"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_source">
            <field name="name">Source</field>
            <field name="res_model">ems.source</field>
            <field name="view_type">form</field>
        </record>
        <menuitem name="Sources" id="menu_source" action="action_source" parent="menu_ems_config_root"/>


        <!-- ================= WIZARDS ================= -->

        <!-- Creem el SESSION reschedule wizard form -->
        <record model="ir.ui.view" id="ems_session_reschedule_wizard_form_view">
            <field name="name">ems.session.reschedule.wizard.form</field>
            <field name="model">ems.session.reschedule.wizard</field>
            <field name="arch" type="xml">
                <form string="Reschedule sessions">
                    <header>
                        <field name="state" select="2" widget="statusbar"
                               statusbar_visible="step1,step2,step3"/>
                    </header>
                    <group attrs="{'invisible':[('state','!=','step1')]}">
                        <field name="out_of_time"/>
                        <field name="reason" widget="text" attrs="{'required':[('state','=','step1')]}"/>
                    </group>
                    <group string="Group sessions" attrs="{'invisible':[('state','!=','step2')]}">
                        <group col="4" colspan="2">
                            <field name="session_id"/>
                            <button name="button_add_session" string="Add session" type="object"/>
                            <button name="button_remove_session" string="Remove session" type="object"/>
                        </group>
                        <field name="partner_ids" nolabel="1">
                            <tree delete="0" create="0" edit="1" editable="bottom">
                                <field name="group"/>
                                <field name="number" readonly="1"/>
                                <field name="session_id" readonly="1" invisible="1"/>
                                <field name="partner_id" readonly="1"/>
                                <field name="service_id" readonly="1"/>
                                <field name="ubication_id" readonly="1" invisible="1"/>
                                <field name="resource_ids" readonly="1" widget="many2many_tags" invisible="1"/>
                                <field name="responsible_id" readonly="1"/>
                                <field name="date_begin" readonly="1"/>
                                <field name="duration" readonly="1"/>
                            </tree>
                        </field>
                    </group>
                    <group string="Edit grouped sessions" attrs="{'invisible':[('state','!=','step3')]}">
                        <group colspan="2" col="4">
                            <field name="responsible_id"/>
                            <field name="weekday_begin"/>
                            <field name="attendee_ids" widget="many2many_tags"/>
                            <button name="button_update" string="Update" type="object"/>
                        </group>
                        <field name="session_ids" nolabel="1">
                            <tree delete="0" create="0" edit="1">
                                <field name="group"/>
                                <!--field name="center_id"/-->
                                <field name="partner_ids"/>
                                <field name="service_id"/>
                                <field name="ubication_id"/>
                                <field name="resource_ids"/>
                                <field name="responsible_id"/>
                                <field name="weekyear_begin"/>
                                <field name="weekday_begin"/>
                                <field name="date_begin"/>
                                <field name="duration"/>
                                <field name="source_session_numbers"/>
                            </tree>
                        </field>
                    </group>
                    <footer>
                        <div states="step1">
                            <button name="button_step2" string="Next" class="oe_highlight" type="object"/>
                            or
                            <button special="cancel" string="Cancel" class="oe_link"/>
                        </div>
                        <div states="step2">
                            <button name="button_step1" string="Previous" type="object"/>
                            <button name="button_grouping" string="Next" class="oe_highlight" type="object"/>
                            or
                            <button special="cancel" string="Cancel" class="oe_link"/>
                        </div>

                        <div states="step3">
                            <button name="button_step2" string="Previous" type="object"/>
                            <button name="button_reschedule" string="Reschedule" type="object" class="oe_highlight"/>
                            or
                            <button special="cancel" string="Cancel" class="oe_link"/>
                        </div>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Action add to more buton (key2=client_action_multi) or to print client_print_action -->
        <act_window id="action_ems_session_reschedule_sessions_wizard_form"
                    name="Reschedule sessions"
                    src_model="ems.session"
                    res_model="ems.session.reschedule.wizard"
                    view_mode="form"
                    target="new"
                    key2="client_action_multi"/>


        <!--record id="ems_session_reschedule_sessions_wizard_form_view" model="ir.ui.view">
            <field name="name">ems.session.reschedule.sessions.wizard.form</field>
            <field name="model">ems.session.reschedule.sessions.wizard</field>
            <field name="inherit_id" ref="view_ems_session_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="replace">

                </xpath>
            </field>
        </record-->


        <!-- Creem el SESSION reschedule sessions wizard form -->
        <record model="ir.ui.view" id="ems_session_reschedule_sessions_wizard_form_view">
            <field name="name">ems.session.reschedule.sessions.wizard.form</field>
            <field name="model">ems.session.reschedule.sessions.wizard</field>
            <field name="arch" type="xml">
                <form string="Reschedule sessions">
                    <group string="New session">
                        <!--group colspan="2" col="4">
                            <group>
                                <field name="center_id" options="{'no_create': True}"/>
                            </group>
                            <group></group>
                        </group-->
                        <group colspan="2" col="4">
                            <group>
                                <group>
                                    <field name="center_id" invisible="1"/>
                                    <field name="service_id" options="{'no_create': True}"/>
                                    <field name="ubication_id" options="{'no_create': True}"/>
                                    <field name="resource_ids" string="Resources" widget="many2many_tags"
                                           options="{'no_create': True}"/>
                                </group>
                                <newline></newline>
                                <group>
                                    <field name="responsible_id"/>
                                    <field name="partner_ids" widget="many2many_tags"/>

                                </group>
                            </group>
                            <group>
                                <group>
                                    <field name="duration"/>
                                    <field name="date_begin"/>
                                    <field name="date_end"/>
                                    <field name="weekday_begin"/>
                                </group>
                                <newline></newline>
                                <group>
                                    <field name="date_helper"/>
                                    <field name="date_begin_last" attrs="{'invisible': [('date_helper', '=', False)]}"/>
                                    <field name="weeks" attrs="{'invisible': [('date_helper', '=', False)]}"/>
                                    <field name="allow_past_date" attrs="{'invisible': [('date_helper', '=', False)]}"/>
                                </group>
                            </group>
                        </group>

                        <!--group colspan="2" col="4">
                            <group>
                                <field name="responsible_id"/>
                            </group>
                            <group/>
                        </group>
                        <group>
                            <field name="partner_ids" widget="many2many_tags"/>
                        </group-->
                    </group>
                    <!--group string="New session" col="4" colspan="2">
                        <field name="center_id"/>
                        <field name="partner_ids" widget="many2many_tags"/>
                        <field name="service_id"/>
                        <field name="ubication_id"/>
                        <field name="resource_ids" widget="many2many_tags"/>
                        <field name="responsible_id"/>
                        <field name="time_change"/>
                        <field name="weeks"/>
                        <field name="allow_past_date"/>
                        <field name="date_begin_last"/>
                        <field name="date_begin"/>
                        <field name="date_end"/>
                        <field name="duration"/>
                    </group-->
                    <group string="Source sessions">
                        <field name="source_session_ids" nolabel="1" readonly="1">
                            <tree fonts="bold:state=='confirmed'"
                                  colors="blue:state=='draft';lightgray:state=='invalid';green:state=='confirmed';purple:state=='rescheduled';firebrick:state=='reschedulepending';darkorange:state=='schedulepending';grey:state in ('cancel')">
                                <field name="number"/>
                                <field name="service_id"/>
                                <field name="weekday_begin"/>
                                <field name="date_begin"/>
                                <field name="duration"/>
                                <field name="partner_text"/>
                                <field name="responsible_id"/>
                                <field name="state"/>
                                <!--button name="button_select" string="Select" type="object"/-->
                            </tree>
                        </field>
                    </group>
                </form>
            </field>
        </record>


        <!-- Creem el SESSION reschedule partners wizard tree -->
        <!--record model="ir.ui.view" id="ems_session_reschedule_partners_wizard_tree_view">
            <field name="name">ems.session.reschedule.partners.wizard.tree</field>
            <field name="model">ems.session.reschedule.partners.wizard</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="set_group" string=""/>
                    <field name="group"/>
                    <field name="partner_id"/>
                    <field name="service_id"/>
                    <field name="ubication_id"/>
                    <field name="resource_ids" widget="many2many_tags"/>
                    <field name="responsible_id"/>
                    <field name="time_change"/>
                    <field name="date_begin_last"/>
                    <field name="date_begin"/>
                    <field name="duration"/>
                    <field name="is_from_original_session" invisible="1"/>
                    <field name="session_id" invisible="1"/>
                </tree>
            </field>
        </record-->

        <!-- Creem el SESSION reschedule sessions wizard form -->
        <!--record model="ir.ui.view" id="ems_session_reschedule_sessions_wizard_form_view">
            <field name="name">ems.session.reschedule.sessions.wizard.form</field>
            <field name="model">ems.session.reschedule.sessions.wizard</field>
            <field name="arch" type="xml">
                <form string="Reschedule sessions">
                    <group col="4" colspan="2">
                        <field name="session_id" attrs="{'readonly': [('is_from_original_session', '=', True)]}"/>
                        <field name="group"/>
                        <field name="partner_id"/>
                        <field name="service_id"/>
                        <field name="ubication_id"/>
                        <field name="resource_ids" widget="many2many_tags"/>
                        <field name="responsible_id"/>
                        <field name="time_change"/>
                        <field name="date_begin_last"/>
                        <field name="date_begin" attrs="{'readonly': [('time_change', '=', False)]}"/>
                        <field name="duration" attrs="{'readonly': [('time_change', '=', False)]}"/>
                        <field name="is_from_original_session" invisible="1"/>
                    </group>
                </form>
            </field>
        </record-->


        <!--act_window id="launch_ems_session_reschedule_wizard"
                    name="Reschedule sessions"
                    src_model="ems.session"
                    res_model="ems.session.reschedule.wizard"
                    view_mode="form"
                    target="new"
                    key2="client_action_multi"/-->


        <!-- Creem el SESSION cancel wizard form -->
        <record model="ir.ui.view" id="ems_session_cancel_wizard_form_view">
            <field name="name">ems.session.cancel.wizard.form</field>
            <field name="model">ems.session.cancel.wizard</field>
            <field name="arch" type="xml">
                <form string="Cancel sessions">
                    <group>
                        <field name="reason" required="1" widget="text"/>
                    </group>
                    <footer>
                        <button name="accept" type="object"
                                string="Accept" class="oe_highlight"/>
                        or
                        <button special="cancel" class="oe_link" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <!-- Creem el SESSION reschedule pending wizard form -->
        <record model="ir.ui.view" id="ems_session_reschedule_pending_wizard_form_view">
            <field name="name">ems.session.reschedule.pending.wizard.form</field>
            <field name="model">ems.session.reschedule.pending.wizard</field>
            <field name="arch" type="xml">
                <form string="Reschedule pending">
                    <group>
                        <field name="reason" required="1" widget="text"/>
                    </group>
                    <footer>
                        <button name="accept" type="object"
                                string="Accept" class="oe_highlight"/>
                        or
                        <button special="cancel" class="oe_link" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Creem el warning wizard -->
        <record model="ir.ui.view" id="ems_message_wizard_form_view">
            <field name="name">ems.message.wizard.form</field>
            <field name="model">ems.message.wizard</field>
            <field name="arch" type="xml">
                <form string="Message">
                    <group>
                        <field name="message" nolabel="1"/>
                    </group>
                    <footer>
                        <button name="accept" type="object"
                                string="Accept" class="oe_highlight"/>
                        or
                        <button special="cancel" class="oe_link" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <!-- Creem el SESSION schedule wizard form -->
        <record model="ir.ui.view" id="ems_session_schedule_wizard_form_view">
            <field name="name">ems.session.schedule.wizard.form</field>
            <field name="model">ems.session.schedule.wizard</field>
            <field name="arch" type="xml">
                <form string="Schedule sessions">
                    <group>
                        <!--field name="session_id" required="1"/-->
                        <field name="num_sessions" required="1"/>
                        <field name="days" required="1"/>
                        <field name="action" widget="radio"/>
                        <field name="date_begin"/>
                    </group>
                    <!--group>
                        <field name="line_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="center_id"/>
                                <field name="service_id"/>
                                <field name="ubication_id"/>
                                <field name="resource_ids" widget="many2many_tags"/>
                                <field name="duration"/>
                                <field name="date_begin"/>
                                <field name="date_end"/>
                                <field name="responsible_id"/>
                                <field name="partner_ids" widget="many2many_tags"/>
                            </tree>
                        </field>

                    </group-->
                    <!--group>
                        <field name="confirm"/>
                        <field name="reason" required="1" widget="text"/>
                    </group!-->
                    <footer>
                        <button name="schedule" type="object"
                                string="Schedule" class="oe_highlight"/>
                        or
                        <button special="cancel" class="oe_link" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Creem el SESSION print wizard form -->
        <record model="ir.ui.view" id="ems_session_print_wizard_form_view">
            <field name="name">ems.session.print.wizard.form</field>
            <field name="model">ems.session.print.wizard</field>
            <field name="arch" type="xml">
                <form string="Print sessions">
                    <group>
                        <field name="session_from" required="1"/>
                        <field name="session_to" required="1"/>
                    </group>
                    <footer>
                        <button name="button_print" type="object"
                                string="Print" class="oe_highlight"/>
                        or
                        <button special="cancel" class="oe_link" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <!-- Creem el info wizard -->
        <record model="ir.ui.view" id="ems_message_info_wizard_form_view">
            <field name="name">ems.message.info.wizard.form</field>
            <field name="model">ems.message.info.wizard</field>
            <field name="arch" type="xml">
                <form string="Message">
                    <group>
                        <field name="message" nolabel="1"/>
                    </group>
                    <footer>
                        <button special="cancel" class="oe_highlight" string="Close"/>
                    </footer>
                </form>
            </field>
        </record>


        <!-- Creem el RESPONSIBLE SESSION print wizard form -->
        <record model="ir.ui.view" id="ems_responsible_sessions_print_wizard_form_view">
            <field name="name">ems.responsible.sessions.print.wizard.form</field>
            <field name="model">ems.responsible.sessions.print.wizard</field>
            <field name="arch" type="xml">
                <form string="Print responsible sessions">
                    <group>
                        <field name="responsible_id"/>
                        <newline></newline>
                        <field name="date_from"/>
                        <field name="date_to"/>
                    </group>
                    <footer>
                        <button name="button_print" type="object"
                                string="Print" class="oe_highlight"/>
                        or
                        <button special="cancel" class="oe_link" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- ########################## EMS/REPORTS ########################## -->
        <menuitem id="report_menu" name="Reports"
                  parent="main_ems_menu" sequence="20"/>

        <!--record id="action_ems_report_responsible_print_sessions" model="ir.actions.act_window">
            <field name="name">Responsible sessions</field>
            <field name="res_model">ems.responsible.sessions.print.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="ems_responsible_sessions_print_wizard_form_view"/>
            <field name="target">new</field>
        </record-->

        <act_window id="action_ems_report_responsible_print_sessions"
                    name="Responsible sessions"
                    src_model="ems.responsible"
                    res_model="ems.responsible.sessions.print.wizard"
                    view_mode="form"
                    target="new"/>
        <!--
                    key2="client_action_multi"/-->

        <menuitem id="menu_ems_report_responsible_print_sessions" action="action_ems_report_responsible_print_sessions"
                  parent="report_menu" sequence="20"/>

        <!-- posem el link al wizard forma netiro al menu  "mas" del registr -->
        <!--act_window id="launch_session_wizard"
                    name="Generate sessions"
                    src_model="ems.session"
                    res_model="ems.session.cancel.wizard"
                    view_mode="form"
                    target="new"
                    key2="client_action_multi"/-->

        <!-- Creem el WIZARD check sesiion number -->
        <!--record model="ir.ui.view" id="ems_check_session_number_wizard_form_view">
            <field name="name">ems.check.session.number.wizard.form</field>
            <field name="model">ems.check.session.number.wizard</field>
            <field name="arch" type="xml">
                <form string="Message">
                    <group>
                        <field name="line_ids" nolabel="1" readonly="1">
                            <tree>
                                <field name="session_id" />
                            </tree>
                        </field>
                    </group>
                    <footer>
                        <button special="cancel" string="Close" class="oe_highlight"/>
                    </footer>
                </form>
            </field>
        </record>



        <record id="action_check_session_number" model="ir.actions.act_window">
            <field name="name">Check Session number</field>
            <field name="res_model">ems.check.session.number.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="ems_check_session_number_wizard_form_view"/>
            <field name="target">new</field>
        </record>

        <menuitem action="action_check_session_number"
                  id="menu_check_session_number"
                  parent="menu_ems_config_root"
                  groups="base.group_no_one"/-->

        <!-- posem el link al wizard forma netiro al menu  "mas" del registr -->
        <!--act_window id="launch_session_wizard"
                    name="Generate sessions"
                    src_model="ems.session"
                    res_model="ems.session.cancel.wizard"
                    view_mode="form"
                    target="new"
                    key2="client_action_multi"/-->


        <!--context="{'search_default_partner_text': active_id, 'default_partner_text' : 'active_id.partner_text' }"-->


        <!--act_window
                id="action_ems_sessions_calendar"
                name="Attendee Sessions"
                src_model="ems.partner"
                res_model="ems.session"
                view_mode="calendar,tree,form"
                domain="[('partner_ids.partner_id.id', '=', context.get('active_id'))]"
        /-->


        <!-- ============= REPORTS ================== -->

        <!-- SESSION SUMMARY -->
        <report string="Session summary"
                id="report_ems_session_summary"
                model="ems.session"
                report_type="qweb-pdf"
                name="ems.report_emssessionsummary"
                file="ems.report_emssessionsummary"
        />

        <record id="paperformat_ems_session_summary" model="report.paperformat">
            <field name="name">A6 Session Summary</field>
            <field name="default" eval="True"/>
            <field name="format">A6</field>
            <!--field name="page_height">80</field>
            <field name="page_width">175</field-->
            <field name="orientation">Landscape</field>
            <field name="margin_top">15</field>
            <field name="margin_bottom">32</field>
            <field name="margin_left">3</field>
            <field name="margin_right">3</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">10</field>
            <field name="dpi">80</field>
        </record>

        <record id="report_ems_session_summary" model="ir.actions.report.xml">
            <field name="paperformat_id" ref="ems.paperformat_ems_session_summary"/>
        </record>

        <!-- RESPONSIBLE SESSIONS -->
        <report string="Responsible sessions"
                id="report_ems_responsible_sessions"
                model="ems.responsable"
                report_type="qweb-pdf"
                name="ems.report_emsresponsiblesessions"
                file="ems.report_emsresponsiblesessions"
        />

        <record id="paperformat_ems_responsible_sessions" model="report.paperformat">
            <field name="name">A4 Responsible sessions</field>
            <field name="default" eval="True"/>
            <field name="format">A4</field>
            <!--field name="page_height">80</field>
            <field name="page_width">175</field-->
            <field name="orientation">Portrait</field>
            <field name="margin_top">48</field>
            <field name="margin_bottom">15</field>
            <field name="margin_left">11</field>
            <field name="margin_right">10</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">38</field>
            <field name="dpi">80</field>
        </record>

        <record id="report_ems_responsible_sessions" model="ir.actions.report.xml">
            <field name="paperformat_id" ref="ems.paperformat_ems_responsible_sessions"/>
        </record>


        <!-- ================= SEQUENCES ================== -->

        <record model="ir.sequence.type" id="seq_ems_session_type_id">
            <field name="name">EMS Session Number</field>
            <field name="code">ems.session.sequence.type</field>
        </record>
        <record model="ir.sequence" id="seq_ems_session_id">
            <field name="name">EMS Session Number</field>
            <field name="code">ems.session.sequence.type</field>
            <field name="prefix"></field>
            <field name="padding">0</field>
        </record>

    </data>
</openerp>
